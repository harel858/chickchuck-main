generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String            @id @default(uuid())
  name             String
  email            String            @unique
  password         String
  phone            String?
  businessName     String            @unique
  openingTime      String?
  profileSrc       String?
  closingTime      String?
  activityDays     Int[]
  appointments     Appointment[]
  availableSlots   AvailableSlot[]
  appointmentSlots AppointmentSlot[]
  Address          Address[]
  Treatment        Treatment[]
}

model Address {
  id      String @id @default(uuid())
  user    User   @relation(fields: [userId], references: [id])
  userId  String
  city    String
  street  String
  zipcode String
}

model Appointment {
  id                String            @id @default(uuid())
  customer          Customer          @relation(fields: [customerId], references: [id])
  customerId        String
  appointmentSlot   AppointmentSlot   @relation(fields: [appointmentSlotId], references: [id])
  appointmentSlotId String            @unique
  treatment         Treatment         @relation(fields: [treatmentId], references: [id])
  treatmentId       String
  status            AppointmentStatus
  notes             String?
  createdAt         DateTime          @default(now())
  User              User              @relation(fields: [userId], references: [id])
  userId            String
}

model Customer {
  id           String        @id @default(uuid())
  name         String
  phoneNumber  String        @unique
  appointments Appointment[]
}

model Treatment {
  id           String        @id @default(uuid())
  title        String
  cost         Int
  duration     Int
  business     User          @relation(fields: [businessId], references: [id])
  businessId   String
  appointments Appointment[]
}

model AvailableSlot {
  id              String            @id @default(uuid())
  start           String
  end             String
  business        User              @relation(fields: [businessId], references: [id])
  businessId      String
  AppointmentSlot AppointmentSlot[]
}

model AppointmentSlot {
  id             String          @id @default(uuid())
  start          String
  end            String
  date           String
  business       User            @relation(fields: [businessId], references: [id])
  businessId     String
  availableSlots AvailableSlot[]
  appointments   Appointment[]
}

enum AppointmentStatus {
  SCHEDULED
  CANCELLED
  COMPLETED
}
